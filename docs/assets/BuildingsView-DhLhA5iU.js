import{Dt as e,G as t,H as n,J as r,K as i,Ot as a,St as ee,W as o,X as s,Y as c,Z as te,jt as l,lt as ne,pt as u,q as d,st as f}from"./vendor-ui-DBxeWLyT.js";import"./vendor-vue-Bqq1sBNf.js";import{t as re}from"./CardDescription-CRV0m8La.js";import{Bt as p,C as m,H as ie,It as ae,J as oe,Pt as h,Rt as g,S as se,V as _,Vt as ce,W as v,X as le,Y as y,b,dt as x,ft as S,jt as C,lt as w,q as T,rt as E,ut as D,x as O,yt as k}from"./index-Cch-Ig40.js";import{t as A}from"./useGameConfig-D2EZdt1x.js";import{t as j}from"./AlertDialog-_72FqRCT.js";var M=C(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),N=C(`grid-3x3`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M3 9h18`,key:`1pudct`}],[`path`,{d:`M3 15h18`,key:`5xshup`}],[`path`,{d:`M9 3v18`,key:`fh3hqa`}],[`path`,{d:`M15 3v18`,key:`14nvp0`}]]),P={key:0,class:`container mx-auto p-4 sm:p-6`},F={class:`flex justify-between items-center mb-4 sm:mb-6 gap-2`},I={class:`text-2xl sm:text-3xl font-bold`},L={class:`text-xs sm:text-sm`},R={class:`flex items-center gap-1.5 text-muted-foreground`},z={class:`grid grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4`},B={class:`flex justify-between items-start gap-2`},V={class:`min-w-0 flex-1`},H={class:`space-y-3`},U={class:`text-xs sm:text-sm space-y-1.5 sm:space-y-2`},W={class:`text-muted-foreground mb-1 sm:mb-2`},ue={class:`space-y-1 sm:space-y-1.5`},de={class:`flex items-center gap-1.5 sm:gap-2`},fe={class:`text-xs`},pe={class:`flex items-center gap-1.5 sm:gap-2`},me={class:`text-xs`},he={class:`flex items-center gap-1.5 sm:gap-2`},ge={class:`text-xs`},_e={class:`text-xs sm:text-sm space-y-0.5 sm:space-y-1`},ve={class:`flex items-center gap-1.5 text-muted-foreground`},ye={class:`flex items-center gap-1.5 text-muted-foreground`},be={key:1,class:`text-xs text-muted-foreground`},xe={class:`flex gap-2 flex-wrap`},G=te({__name:`BuildingsView`,setup(te){let C=ce(),G=k(),{t:K}=p(),{BUILDINGS:q}=A(),J=o(()=>C.currentPlanet),Y=ee(null),Se=o(()=>J.value?Object.values(E).filter(e=>{let t=q.value[e];return J.value.isMoon?t.moonOnly===!0:t.moonOnly!==!0}):[]),Ce=e=>{if(!C.currentPlanet||!m(C.currentPlanet,e,C.player.technologies,C.player.officers).valid)return!1;let t=O(C.currentPlanet,e,C.player.officers);return C.currentPlanet.buildQueue.push(t),!0},we=e=>le(e),Te=e=>{Ce(e)||Y.value?.show({title:K(`buildingsView.upgradeFailed`),message:K(`buildingsView.upgradeFailedMessage`)})},X=e=>J.value?.buildings[e]||0,Z=e=>{if(!J.value||J.value.buildQueue.length>0)return!1;let t=Q(e,X(e)+1);return J.value.resources.metal>=t.metal&&J.value.resources.crystal>=t.crystal&&J.value.resources.deuterium>=t.deuterium},Q=(e,t)=>T(e,t),Ee=(e,t)=>oe(e,t),De=e=>{if(!C.currentPlanet||!se(C.currentPlanet,e,C.player.officers).valid)return!1;let t=b(C.currentPlanet,e,C.player.officers);return C.currentPlanet.buildQueue.push(t),!0},Oe=e=>{De(e)||Y.value?.show({title:K(`buildingsView.demolishFailed`),message:K(`buildingsView.demolishFailedMessage`)})},ke=e=>!J.value||J.value.buildQueue.length>0?!1:X(e)>0,$=e=>y(e,X(e));return(ee,o)=>J.value?(f(),r(`div`,P,[t(`div`,F,[t(`h1`,I,l(e(K)(`buildingsView.title`)),1),t(`div`,L,[t(`span`,R,[s(e(N),{size:14}),c(` `+l(we(J.value))+` / `+l(J.value.maxSpace),1)])])]),t(`div`,z,[(f(!0),r(n,null,ne(Se.value,n=>(f(),i(e(S),{key:n},{default:u(()=>[s(e(D),null,{default:u(()=>[t(`div`,B,[t(`div`,V,[s(e(w),{class:`text-base sm:text-lg cursor-pointer hover:text-primary transition-colors`,onClick:t=>e(G).openBuilding(n,X(n))},{default:u(()=>[c(l(e(q)[n].name),1)]),_:2},1032,[`onClick`]),s(e(re),{class:`text-xs sm:text-sm`},{default:u(()=>[c(l(e(q)[n].description),1)]),_:2},1024)]),s(e(ae),{variant:`secondary`,class:`text-xs whitespace-nowrap flex-shrink-0`},{default:u(()=>[c(`Lv `+l(X(n)),1)]),_:2},1024)])]),_:2},1024),s(e(x),null,{default:u(()=>[t(`div`,H,[t(`div`,U,[t(`p`,W,l(e(K)(`buildingsView.upgradeCost`))+`:`,1),t(`div`,ue,[t(`div`,de,[s(h,{type:`metal`,size:`sm`}),t(`span`,fe,l(e(K)(`resources.metal`))+`:`,1),t(`span`,{class:a([`font-medium text-xs sm:text-sm`,e(v)(J.value.resources.metal,Q(n,X(n)+1).metal)])},l(e(_)(Q(n,X(n)+1).metal)),3)]),t(`div`,pe,[s(h,{type:`crystal`,size:`sm`}),t(`span`,me,l(e(K)(`resources.crystal`))+`:`,1),t(`span`,{class:a([`font-medium text-xs sm:text-sm`,e(v)(J.value.resources.crystal,Q(n,X(n)+1).crystal)])},l(e(_)(Q(n,X(n)+1).crystal)),3)]),t(`div`,he,[s(h,{type:`deuterium`,size:`sm`}),t(`span`,ge,l(e(K)(`resources.deuterium`))+`:`,1),t(`span`,{class:a([`font-medium text-xs sm:text-sm`,e(v)(J.value.resources.deuterium,Q(n,X(n)+1).deuterium)])},l(e(_)(Q(n,X(n)+1).deuterium)),3)])])]),t(`div`,_e,[t(`div`,ve,[s(e(M),{size:14,class:`flex-shrink-0`}),t(`span`,null,l(e(ie)(Ee(n,X(n)+1))),1)]),t(`div`,ye,[s(e(N),{size:14,class:`flex-shrink-0`}),t(`span`,null,l(e(q)[n].spaceUsage),1)])]),s(e(g),{onClick:e=>Te(n),disabled:!Z(n),class:`w-full`},{default:u(()=>[c(l(e(K)(`buildingsView.upgrade`)),1)]),_:1},8,[`onClick`,`disabled`]),X(n)>0?(f(),i(e(g),{key:0,onClick:e=>Oe(n),disabled:!ke(n),variant:`destructive`,class:`w-full`},{default:u(()=>[c(l(e(K)(`buildingsView.demolish`)),1)]),_:1},8,[`onClick`,`disabled`])):d(``,!0),X(n)>0?(f(),r(`div`,be,[t(`p`,null,l(e(K)(`buildingsView.demolishRefund`))+`:`,1),t(`div`,xe,[t(`span`,null,l(e(_)($(n).metal))+` `+l(e(K)(`resources.metal`)),1),t(`span`,null,l(e(_)($(n).crystal))+` `+l(e(K)(`resources.crystal`)),1),t(`span`,null,l(e(_)($(n).deuterium))+` `+l(e(K)(`resources.deuterium`)),1)])])):d(``,!0)])]),_:2},1024)]),_:2},1024))),128))]),s(j,{ref_key:`alertDialog`,ref:Y},null,512)])):d(``,!0)}});export{G as default};